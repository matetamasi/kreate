<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <!-- Define command -->
   <extension
         point="org.eclipse.ui.commands">
      <command
            id="hu.bme.mit.kerml.kreate.translate"
            name="Translate"
            description="Translate a SysMLv2/KerML model to Refinery"/>
   </extension>

   <!-- Bind handler to command -->
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="hu.bme.mit.kerml.kreate.KreateTranslationHandler"
            commandId="hu.bme.mit.kerml.kreate.translate">
      </handler>
   </extension>

   <!-- Add context menu entry to Project Explorer -->
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution allPopups="false"
            locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu">
                <command
                    commandId="hu.bme.mit.kerml.kreate.translate"
                    label="Translate to Refinery"
                    icon="icons/refinery.png"
                    style="push">
                        <visibleWhen checkEnabled="false">
                            <iterate ifEmpty="false" operator="or">
                                <test
                                    property="org.eclipse.core.resources.name"
                                    value="*.kerml">
                                </test>
                            </iterate>
                        </visibleWhen>
                </command>
      </menuContribution>
   </extension>

   <!-- Add context menu entry to Package Explorer -->
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution allPopups="false"
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
                <command
                    commandId="hu.bme.mit.kerml.kreate.translate"
                    label="Translate to Refinery"
                    icon="icons/refinery.png"
                    style="push">
                        <visibleWhen checkEnabled="false">
                            <iterate ifEmpty="false" operator="or">
                                <test
                                    property="org.eclipse.core.resources.name"
                                    value="*.kerml">
                                </test>
                            </iterate>
                        </visibleWhen>
                </command>
      </menuContribution>
   </extension>

   <!-- Add context menu entry to Model Explorer -->
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution allPopups="false"
            locationURI="popup:org.eclipse.sirius.ui.tools.views.model.explorer#PopupMenu">
                <command
                    commandId="hu.bme.mit.kerml.kreate.translate"
                    label="Translate to Refinery"
                    icon="icons/refinery.png"
                    style="push">
                        <visibleWhen checkEnabled="false">
                            <iterate ifEmpty="false" operator="or">
                                <test
                                    property="org.eclipse.core.resources.name"
                                    value="*.kerml">
                                </test>
                            </iterate>
                        </visibleWhen>
                </command>
      </menuContribution>
   </extension>
</plugin>


